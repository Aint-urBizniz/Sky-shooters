<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shooting Stars</title>
  <style>
    body { margin:0; background:black; overflow:hidden; }
    canvas { display:block; margin:0 auto; background:black; }
    #score {
      position: absolute;
      top: 15px;
      left: 15px;
      color: white;
      font-family: monospace;
      font-size: 24px;
      font-weight: bold;
      text-shadow: 0 0 5px #00f, 0 0 10px #0ff;
    }
  </style>
</head>
<body>
  <div id="score">Score: 0</div>
  <canvas id="gameCanvas"></canvas>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Player
    const player = { x: canvas.width/2, y: canvas.height-60, size: 30, speed: 7 };
    let bullets = [];
    let stars = [];
    let keys = {};
    let canShoot = true;
    let score = 0;

    function drawPlayer() {
      ctx.fillStyle = "cyan";
      ctx.beginPath();
      ctx.moveTo(player.x, player.y);
      ctx.lineTo(player.x - player.size/2, player.y + player.size);
      ctx.lineTo(player.x + player.size/2, player.y + player.size);
      ctx.closePath();
      ctx.fill();
    }

    function drawBullets() {
      ctx.fillStyle = "lime";
      bullets.forEach(b => ctx.fillRect(b.x-2, b.y, 4, 10));
    }

    function drawStars() {
      stars.forEach(s => {
        if (s.speed > 2.5) {
          ctx.strokeStyle = "rgba(255,255,200,0.6)";
          ctx.lineWidth = Math.min(6, s.speed / 2);
          ctx.beginPath();
          ctx.moveTo(s.x, s.y);
          ctx.lineTo(s.x - s.vx*8, s.y - s.vy*8);
          ctx.stroke();
        }
        ctx.fillStyle = "white";
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.size, 0, Math.PI*2);
        ctx.fill();
      });
    }

    function update() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Player movement
      if (keys["ArrowLeft"] && player.x > player.size/2) player.x -= player.speed;
      if (keys["ArrowRight"] && player.x < canvas.width - player.size/2) player.x += player.speed;

      // Shooting
      if (keys[" "] && canShoot) {
        shoot();
        canShoot = false;
        setTimeout(() => canShoot = true, 200);
      }

      drawPlayer();
      drawBullets();
      drawStars();

      // Move bullets
      bullets.forEach(b => b.y -= 10);
      bullets = bullets.filter(b => b.y > 0);

      // Move stars
      stars.forEach(s => { s.x += s.vx; s.y += s.vy; });
      stars = stars.filter(s => 
        s.x > -100 && s.x < canvas.width+100 &&
        s.y > -100 && s.y < canvas.height+100
      );

      // Collision detection
      bullets.forEach((b, bi) => {
        stars.forEach((s, si) => {
          let dx = b.x - s.x;
          let dy = b.y - s.y;
          let distance = Math.sqrt(dx*dx + dy*dy);
          if (distance < s.size + 5) {
            let points = Math.round(20 - s.size*2);
            if (points < 5) points = 5;
            score += points;
            document.getElementById("score").textContent = "Score: " + score;

            stars.splice(si, 1);
            bullets.splice(bi, 1);
          }
        });
      });

      requestAnimationFrame(update);
    }

    function shoot() {
      bullets.push({ x: player.x, y: player.y });
    }

    function spawnStar() {
      const angle = Math.random() * Math.PI * 2;
      const speed = 0.5 + Math.random() * 4.5;
      stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height / 2,
        size: 4 + Math.random() * 6,
        speed: speed,
        vx: Math.cos(angle) * speed,
        vy: Math.sin(angle) * speed
      });
    }

    // Key handlers
    document.addEventListener("keydown", e => { keys[e.key] = true; });
    document.addEventListener("keyup", e => { keys[e.key] = false; });

    // Spawn stars more often
    setInterval(spawnStar, 500);

    update();
  </script>
</body>
</html>
